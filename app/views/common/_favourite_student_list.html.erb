<% if can?(:favourite_student_list, Kodawarione::CompanyManage) %>
<!--begin::Company Favourite Student List-->
<div class="card  mb-5 mb-xxl-10 <%= current_admin ? 'bg-body' : '' %>">
    <!--begin::header-->
    <div class="card-header border-0 pt-5">
        <h3 class="card-title align-items-start flex-column">
          <span class="card-label fw-bolder fs-3 mb-1"><%= t ('common.favourite_users') %></span>
        </h3>
    </div>          
    <!--end::Card header-->
    <!--begin::Card Body -->
    <div class="card-body pt-2 pb-5 px-5">
        <% if fav_students.present? %>               
          <!--begin::Table container-->
          <div class="table-responsive  d-none d-sm-none d-md-block d-lg-block d-xl-block">
            <!--begin::Table-->
            <table class="table table-row-dashed align-middle gs-0 gy-4 my-0">
              <!--begin::Table head-->
              <thead class="bg-light">
                <tr class="fs-7 fw-bolder text-gray-500 border-bottom-0">
                  <th class="ps-4 min-w-140px rounded-start"><%= t('student.student_show.name')%></th>
                  <th class="min-w-100px"><%= Student::Student.human_attribute_name('school_type') %></th>
                  <th class="min-w-100px"><%= Student::Student.human_attribute_name('school_name') %></th>
                  <th class="min-w-100px"><%= Student::Student.human_attribute_name('graduation_date') %></th>
                  <th class="min-w-30px text-end pe-3"><%= t('event.title.edit_text_title') %></th>
                  <th class="rounded-end"></th>
                </tr>
              </thead>
              <!--end::Table head-->
              <!--begin::Table body-->
              <tbody>
                <% fav_students.each do |student| %>
                    <tr>
                        <td class="d-flex align-items-center">
                            <!--begin:: Avatar -->
                            <div class="symbol symbol-circle symbol-50px overflow-hidden me-3">
                                <% if student.image.attached? %>
                                <%= image_tag (student.image), :class=> "symbol-label" %>
                                <% else %>
                                    <% if student.gender == "female" %>
                                        <%= image_tag "avatar/female.svg", :class=> "symbol-label" %>                                
                                    <% else %>
                                        <%= image_tag "avatar/male.svg", :class=> "symbol-label" %>   
                                    <% end %>
                                <% end %> 
                            </div>
                            <!--end::Avatar-->
                            <!--begin::User details-->
                            <div class="d-flex flex-column w-lg-50px w-xl-250px">
                                <span class="text-gray-800 text-truncate mb-1">
                                    <%= student.nick_name %>
                                </span>
                                <span class="text-muted text-truncate fw-bold text-muted d-block fs-7"><%= student.user.email %></span>
                            </div>
                            <!--end::User details-->
                        </td>
                        <td>
                            <span class="text-muted fw-bold d-block fs-6"><%= get_school_type(student.school_type) %></span>
                        </td>
                        <td>
                            <span class="text-muted fw-bold d-block fs-6"><%=  get_student_field_name(student.school_name) %></span>
                        </td>
                        <td>
                            <span class="text-muted fw-bold d-block fs-6"><%=  get_graduation_date(student.graduation_date) %></span>
                        </td>                                  
                        <td class="pe-1">
                            <div class="d-flex justify-content-end flex-shrink-0">
                                <%= link_to kodawarione_student_manage_student_overview_path(:id => student.user_id), :class=>"btn btn-icon btn-bg-light btn-active-color-primary btn-sm" do %>
                                    <!--begin::Svg Icon | path: icons/duotune/art/art005.svg-->
                                    <span class="svg-icon svg-icon-3">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M17.5 11H6.5C4 11 2 9 2 6.5C2 4 4 2 6.5 2H17.5C20 2 22 4 22 6.5C22 9 20 11 17.5 11ZM15 6.5C15 7.9 16.1 9 17.5 9C18.9 9 20 7.9 20 6.5C20 5.1 18.9 4 17.5 4C16.1 4 15 5.1 15 6.5Z" fill="black" />
                                            <path opacity="0.3" d="M17.5 22H6.5C4 22 2 20 2 17.5C2 15 4 13 6.5 13H17.5C20 13 22 15 22 17.5C22 20 20 22 17.5 22ZM4 17.5C4 18.9 5.1 20 6.5 20C7.9 20 9 18.9 9 17.5C9 16.1 7.9 15 6.5 15C5.1 15 4 16.1 4 17.5Z" fill="black" />
                                        </svg>
                                    </span>
                                    <!--end::Svg Icon-->
                                <% end %>
                            </div>
                        </td>
                    </tr>
                <% end %>
              </tbody>
              <!--end::Table body-->
            </table>
          </div>
          <!--end::Table-->
          <!--begin::Mobile View-->
          <div class="d-block d-sm-block d-md-none d-lg-none d-xl-none">
            <% fav_students.each do |student| %>
              <%= link_to kodawarione_student_manage_student_overview_path(:id => student.user_id), class: "text-decoration-none text-dark" do %>                                 
                <div class="card border border-primary border-4 border-top-0 border-end-0 border-bottom-0 border-start bg-light card-custom gutter-b mb-3 <%= current_admin ? 'bg-body' : '' %>">
                  <!--begin::Body-->
                  <div class="card-body p-4">
                    <div class="d-flex align-items-center">
                      <div class="symbol symbol-50px me-2 ms-n3">
                        <span class="symbol-label">
                            <% if student.image.attached? %>
                            <%= image_tag (student.image), :class=> "h-50 align-self-center" %>
                            <% else %>
                                <% if student.gender == "female" %>
                                    <%= image_tag "avatar/female.svg", :class=> "h-50 align-self-center" %>                                
                                <% else %>
                                    <%= image_tag "avatar/male.svg", :class=> "h-50 align-self-center" %>   
                                <% end %>
                            <% end %> 
                        </span>
                      </div>
                      <div>
                        <div class="d-flex justify-content-between">
                          <div>
                            <span class="text-gray-400 text-truncate fs-8 fw-bolder me-2 d-block lh-1 pb-1"><%= student.nick_name %></span>
                            <span class="text-gray-800 fs-5 fw-bolder"><%= student.user.email %></span>
                          </div>
                        </div>                                        
                        <div class="d-flex flex-wrap">
                          <!--begin::Text-->
                          <span class="fw-bolder fs-6 me-2"><%= get_school_type(student.school_type) %> -</span>
                          <span class="fw-bold text-gray-600 fs-6"></i> <%=  get_student_field_name(student.school_name) %></span>
                          <!--end::Text-->                                 
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--end::Body-->    
                </div>
              <% end %>
            <% end %>
          </div>
          <!--end::Mobile View-->
        <% else %>	
          <!--begin::Wrapper-->
          <div class="text-center py-2 my-10">
            <!--begin::Description-->
            <p class="text-gray-400 fs-7 fw-bold mb-5">
              <%= t ('common.favourite_users') %><%= t('company_assessment.no_wish_list_added_1')%>
              <% unless current_admin %>
                    <i class="fas fa-heart icon-mid mx-2">
                    </i>ï¼‰<%= t('company_assessment.no_wish_list_added_2')%>
              <% end %>
            </p>
            <!--end::Description-->
            <!--begin::Action-->
            <% unless current_admin %>
                <%= link_to (t'btn.fav-text'), company_students_search_path, class: "btn btn-primary" %>      
            <% end %>       
            <!--end::Action-->
          </div>
          <!--end::Wrapper-->					
        <% end %>
    </div>
    <!--end::Card body-->
</div>
<!--end::Company Favourite Student List-->
<!--begin:: Pagination-->
<% if fav_students.present? %>
  <div class="d-flex flex-wrap justify-content-between align-items-center pt-10">
    <div class="d-flex flex-wrap">
      <%= paginate  fav_students %>
    </div>
    <div class="d-flex align-items-center py-3">
      <span class="text-muted"><%=  t('common.list_display')  %> <%=  fav_students.total_count %> <%=  t('common.to')  %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <%=  fav_students.offset_value + 1 %> ~ <%=   fav_students.offset_value +  fav_students.count %> <%=  t('common.search_result')  %></span>
    </div>
  </div>	
<% end %>
<!--end: Pagination-->
<% end %>