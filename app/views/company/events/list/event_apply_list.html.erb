<!--begin::Header-->
<% breadcrumbs_navigation_add (t('event.title.event_entry_list_tilte')), company_events_path if cookies[:previous_url] == '/company/events' || cookies[:previous_url] == '/company/select_past_events'   %>
<% breadcrumbs_navigation_add (t('event.title.past_event')), company_select_past_events_path if cookies[:previous_url] == '/company/select_past_events' %> 
<% breadcrumbs_navigation_add (t ('event.title.event_join_stu_list')),'#' %>
<%= render_company_breadcrumbs_navigation(t("event.title.event_information")) %>
<!--end::Header-->
<!--begin::Content-->
<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
    <!--begin::Container-->
    <div class="container-xxl" id="kt_content_container">
        <%= render "company/shared/events/event_detail_banner" %>    
        <% if @join_event_list.present? %>           
            <div class="content flex-row-fluid pt-0" id="kt_content"> 
                <div class="card bg-body rounded-top-0 mb-5 mb-xl-10">
                    <div class="card-header border-0 pt-5">
                        <h3 class="card-title align-items-start flex-column">
                            <span class="card-label fw-bolder fs-3 mb-1"><%= t ('event.title.event_join_stu_list') %></span>
                            <span class="text-muted mt-1 fw-bold fs-7"><%= @join_event_list.size %> <%= t('common.student_total_count') %></span>
                        </h3> 
                        <div class="fs-4 fw-bolder bg-light-primary rounded d-flex flex-center px-5">
                            <%= t'event.title.apply_limit' %>: <%= @join_event_list.size %> / <%= @event.apply_event_limit %> <%= t 'unit.persons' %>
                        </div>
                    </div>
                    <div class="card-body py-4"> 
                        <div class="table-responsive  overflow-auto">
                            <table class="table align-middle table-row-dashed fs-6 gy-5" id="kt_table_users"> 
                                <thead>
                                    <!--begin::Table row-->
                                    <tr class="text-start text-muted fw-bolder fs-7 text-uppercase gs-0"> 
                                        <th class="min-w-200px"><%=  t 'student.student_show.name' %></th> 
                                        <th class="min-w-125px"><%= t 'activerecord.attributes.company/company_member.join_date' %></th>  
                                    </tr>
                                    <!--end::Table row-->
                                </thead> 
                                <tbody class="text-gray-600 fw-bold">  
                                    <% @join_event_list.each do |student_join_event| %>
                                        <tr>
                                            <td class="d-flex align-items-center"> 
                                                <div class="symbol symbol-circle symbol-50px overflow-hidden me-3">
                                                    <%= image_tag student_join_event.image.attached? ? student_join_event.image : "avatar/male.svg", class: "symbol-label" %> 
                                                </div> 
                                                <div class="d-flex flex-column">
                                                    <%= link_to company_student_details_path(id: student_join_event.id), :class=> 'text-gray-800 text-hover-primary mb-1' do %>
                                                        <%= student_join_event.nick_name %>
                                                    <% end %> 
                                                    <span></span>
                                                </div> 
                                            </td>   
                                            <td><%= l @event.updated_at.to_date %></td>
                                        </tr>
                                    <% end %>
                                </tbody> 
                            </table>                   
                        </div>                            
                    </div>
                </div>  
            </div>  
            <!--begin::pagination-->
            <div class="d-flex flex-wrap justify-content-between align-items-center my-2">
                <div class="d-flex flex-wrap py-2 mr-3">
                    <%= paginate  @join_event_list %>
                </div>
                <div class="d-flex align-items-center py-3">
                    <span class="text-muted"><%=  t('common.list_display')  %><%= @join_event_list.total_count %> <%=  t('common.to')  %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <%= @join_event_list.offset_value + 1 %> ~ <%=  @join_event_list.offset_value + @join_event_list.count %> <%=  t('common.search_result')  %> </span>
                </div>
            </div>
            <!--end::pagination-->
        <% else %> 
            <!--begin::Card-->
            <div class="card bg-body">
                <!--begin::Card body-->
                <div class="card-body p-0">
                    <!--begin::Wrapper-->
                    <div class="card-px py-5 my-5">
                        <!--begin::Description-->
                        <div class="d-flex align-items-center flex-column">
                            <span class="text-muted m-1 fw-bold"><%= t ('event.title.event_join_stu_list_no_data') %></span>
                        </div>
                        <!--end::Description-->
                    </div>
                    <!--end::Wrapper-->
                </div>
                <!--end::Card body-->
            </div>
            <!--end::Card-->
        <% end %> 
    </div>
</div>