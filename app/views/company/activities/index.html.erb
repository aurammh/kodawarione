<!--begin::Breadcrumb-->
<% breadcrumbs_navigation_add (t ('student_commitment.menu.create_company_page')), '#' %>
<%= render_company_breadcrumbs_navigation(t('activity.title')) %>
<!--end::Breadcrumb-->
<!--begin::Content-->
<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
  <!--begin::Container-->
  <div class="container-xxl" id="kt_content_container">
    <%= render partial: "company/shared/commitment_profiles/common_banner" %>
    <% if @company_activities.present? %>
      <!--begin::Card-->
      <div class="card bg-body mb-5 mb-xl-10">
        <!--begin::Card body-->
        <div class="card-body mt-15 p-lg-17">
          <!--begin::Top-->
          <div class="text-center mb-12">
            <!--begin::Title-->
            <h2 class="fs-2x fw-bolder mb-10"><%= t('activity.title') %></h2>
            <!--end::Title-->
            <!--begin::Text-->
            <p class="text-gray-400 fs-4 fw-bold mb-7"><%= t('activity.subtitle').html_safe %></p>
            <!--end::Text-->
            <% if can?(:new, Company::Activity) %>
              <%= link_to t('activity.btn.new_activity'), new_company_activity_path, class: "btn btn-primary" %>
            <% end %>
          </div>
          <!--end::Top-->
          <!--begin::Row-->
          <div class="row g-10 mt-20">
            <% @company_activities.each do |company_activity| %>
              <!--begin::Col-->
              <div class="col-lg-6 col-xl-4">
                <!--begin::Publications post-->
                <div class="card-xl-stretch me-md-6">
                  <!--begin::Video-->
                  <% if company_activity.video_clip.attached? && company_activity.video_clip.persisted? && company_activity.thumbnail.attached? && company_activity.thumbnail.persisted? %>
                    <video
                      id="my-video"
                      class="video-js vjs-default-skin vjs-big-play-centered w-100 h-175px mb-4"
                      controls
                      preload="auto"
                      width="400"
                      height="175"
                      poster="<%= url_for(company_activity.thumbnail) %>"
                      data-setup="{}"
                    >
                      <source src="<%= url_for(company_activity.video_clip) %>" />
                    </video>
                  <% end %>
                  <!--end::Video-->
                  <!--begin::Body-->
                  <div class="m-0">
                    <!--begin::Title-->
                    <%= link_to company_activity.title, company_activity, class: "fs-4 text-dark fw-bolder text-hover-primary text-dark lh-base" %>
                    <!--end::Title-->
                    <!--begin::Text-->
                    <div class="fw-bold fs-5 text-gray-600 text-dark mt-3 mb-5"><%= company_activity.desc.to_plain_text.truncate(120) %></div>
                    <!--end::Text-->
                    <!--begin::Content-->
                    <div class="fs-6 fw-bolder">
                      <!--begin::Author-->
                      <span class="text-gray-700 text-hover-primary">作成日 : </span>
                      <!--end::Author-->
                      <!--begin::Date-->
                      <span class="text-muted"><%= l company_activity.created_at.to_date %></span>
                      <!--end::Date-->
                    </div>
                    <!--end::Content-->
                  </div>
                  <!--end::Body-->
                </div>
                <!--end::Publications post-->
              </div>
              <!--end::Col-->
            <% end %>
          </div>
          <!--end::Row-->
          <!--begin::Pagination-->
          <div class="d-flex flex-wrap justify-content-between align-items-center pt-10">
            <div class="d-flex flex-wrap">
              <%= paginate @company_activities %>
            </div>
            <div class="d-flex align-items-center py-3">
              <span class="text-muted"><%=  t('common.list_display')  %> <%= @company_activities.total_count %> <%=  t('common.to')  %> <%= @company_activities.offset_value + 1 %> ~ <%=  @company_activities.offset_value + @company_activities.count %> <%=  t('common.search_result')  %> </span>
            </div>
          </div>
          <!--end::Pagination-->
        </div>
        <!--end::Card body-->
      </div>
      <!--end::Card-->
    <% else %>
      <!--begin::Card-->
      <div class="card bg-body mb-5 mb-xl-10">
        <!--begin::Card body-->
        <div class="card-body p-0">
          <!--begin::Wrapper-->
          <div class="card-px text-center py-5 my-5">
            <!--begin::Title-->
            <h2 class="fs-2x fw-bolder mb-10"><%= t('activity.title') %></h2>
            <!--end::Title-->
            <!--begin::Description-->
            <p class="text-gray-400 fs-4 fw-bold mb-7">
              <%= t('activity.subtitle')%>
            </p>
            <!--end::Description-->
            <!--begin::Action-->
            <% if can?(:new, Company::Activity) %>
              <%= link_to t('activity.btn.new_activity'), new_company_activity_path, class: "btn btn-primary" %>
            <% end %>
            <!--end::Action-->
          </div>
          <!--end::Wrapper-->
        </div>
        <!--end::Card body-->
      </div>
      <!--end::Card-->
    <% end %>
  </div>
  <!--end::Container-->
</div>
<!--end::Content-->