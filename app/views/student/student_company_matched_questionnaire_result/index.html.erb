<!--begin::Toolbar-->
<div class="toolbar py-5 py-lg-5" id="kt_toolbar">
    <!--begin::Container-->
    <div id="kt_toolbar_container" class="container-xxl d-flex flex-stack flex-wrap">
        <!--begin::Page title-->
        <% breadcrumbs_navigation_add (t('dashboard.student_company_matched_result')), '#' %>
        <%= render_student_breadcrumbs_navigation(t('dashboard.student_company_matched_result')) %>	
        <!--end::Page title-->
    </div>
    <!--end::Container-->
</div>
<!--end::Toolbar-->
<!--begin::Container-->
<div id="kt_content_container" class="d-flex flex-column-fluid align-items-start container-xxl">
    <!--begin::Content-->
    <div class="content flex-row-fluid" id="kt_content">
        <!--begin::Kodawari-->
        <ul class="nav row g-10">
            <li class="nav-item col-12 col-lg-4">
                <%= link_to student_student_company_matched_result_path, class: "nav-link btn btn-flex btn-color-gray-400 btn-outline btn-outline-default btn-active-primary d-flex flex-grow-1 flex-column flex-center py-3", :data => { :'bs-toggle' => 'tooltip', :'bs-trigger' => 'hover', :'bs-dismiss' => 'click', :'bs-placement' => 'right' } do %> 
                    <!--begin::Svg Icon | path: icons/duotune/general/gen008.svg-->
                    <span class="svg-icon svg-icon-2x mb-5 mx-0">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                <rect x="0" y="0" width="24" height="24" />
                                <path d="M5,3 L6,3 C6.55228475,3 7,3.44771525 7,4 L7,20 C7,20.5522847 6.55228475,21 6,21 L5,21 C4.44771525,21 4,20.5522847 4,20 L4,4 C4,3.44771525 4.44771525,3 5,3 Z M10,3 L11,3 C11.5522847,3 12,3.44771525 12,4 L12,20 C12,20.5522847 11.5522847,21 11,21 L10,21 C9.44771525,21 9,20.5522847 9,20 L9,4 C9,3.44771525 9.44771525,3 10,3 Z" fill="#000000" />
                                <rect fill="#000000" opacity="0.3" transform="translate(17.825568, 11.945519) rotate(-19.000000) translate(-17.825568, -11.945519)" x="16.3255682" y="2.94551858" width="3" height="18" rx="1" />
                            </g>
                        </svg>
                    </span>
                    <!--end::Svg Icon-->
                    <span class="fs-6 fw-bolder">こだわりタイプマッチング</span>
                <% end %>
            </li>
            <li class="nav-item col-12 col-lg-4">
                <%= link_to student_student_company_matched_questionnaire_result_path, class: "nav-link btn btn-flex btn-color-gray-400 btn-outline btn-outline-default btn-active-primary d-flex flex-grow-1 flex-column flex-center py-3 active",:data => { :'bs-toggle' => 'tooltip', :'bs-trigger' => 'hover', :'bs-dismiss' => 'click', :'bs-placement' => 'right' } do %> 
                    <!--begin::Svg Icon | path: icons/duotune/finance/fin006.svg-->
                    <span class="svg-icon svg-icon-2x mb-5 mx-0">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24" />
                                    <rect fill="#000000" opacity="0.3" x="13" y="4" width="3" height="16" rx="1.5" />
                                    <rect fill="#000000" x="8" y="9" width="3" height="11" rx="1.5" />
                                    <rect fill="#000000" x="18" y="11" width="3" height="9" rx="1.5" />
                                    <rect fill="#000000" x="3" y="13" width="3" height="7" rx="1.5" />
                                </g>
                            </svg>
                        </span>
                    <!--end::Svg Icon-->
                    <span class="fs-6 fw-bolder">こだわり企業マッチング</span>
                <% end %>
            </li>
        </ul>

        <div class="d-flex flex-column flex-lg-row mt-10">
            <!--begin::Aside-->
            <div class="flex-column flex-lg-row-auto w-100 w-lg-250px w-xxl-325px me-lg-9 me-5" id="kt_search">
                <!--begin::Form-->   
                <div class="search_form" data-kt-drawer="true" data-kt-drawer-name="search_form" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="{default:'200px', '300px': '100%'}" data-kt-drawer-direction="start" data-kt-drawer-toggle="#search_form_toggle" data-kt-swapper="true" data-kt-swapper-mode="prepend" data-kt-swapper-parent="{default: '#kt_body', lg: '#kt_search'}"> 
                    <%= form_for( '',url: student_student_company_matched_questionnaire_result_path, :method => "get") do |form| %>
                        <!--begin::Card-->
                        <div class="card border-secondary bg-body">
                            <div class="card-title d-flex d-md-flex d-lg-none d-xl-none align-item-center border justify-content-center p-5">
                                <%= link_to student_students_path(id: current_user.id) ,class: "flex-grow-1 mt-auto" do %>
                                    <%= image_tag "layout/header_logo.png", class: "h-25px h-lg-40px" %>   
                                <% end %>
                                <!--begin::Close-->
                                <div class="d-flex d-md-flex d-lg-none d-xl-none btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary active">
                                    <span class="svg-icon svg-icon-2x" data-kt-drawer-dismiss="true">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black" />
                                        <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black" />
                                    </svg>
                                    </span>
                                </div>
                                <!--end::Close-->
                            </div>
                            <!--begin::Body-->
                            <div class="card-body">
                                <!--begin:Search-->
                                <div class="position-relative">
                                    <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
                                    <span class="svg-icon svg-icon-3 svg-icon-gray-500 position-absolute top-50 translate-middle ms-6">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="black"></rect>
                                            <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="black"></path>
                                        </svg>
                                    </span>
                                    <!--end::Svg Icon-->
                                    <%= form.text_field :keyword, class: "form-control form-control-solid ps-10", value: (params[:keyword]), placeholder: t('search.keyword_search') %>
                                </div>
                                <!--end:Search-->
                                <div class="separator separator-dashed my-8"></div>
                                <!--begin::Input group-->
                                <div class="mb-5">
                                    <label class="fs-6 form-label fw-bolder text-dark"><%= Company::Vacancy.human_attribute_name('recruit_industry_type') %></label>
                                    <!--begin::Select-->
                                    <%=  select_tag :industry_id,options_for_select(industry_type_options.map { |ind| [ind.industry_name, ind.id] },params[:industry_id]),include_blank: t('student.search.view_all_industry_type'),class: 'form-select form-select-solid', :data => { :control => 'select2', 'hide-search' => true } %>                                                
                                    <!--end::Select-->
                                </div>
                                <!--end::Input group-->
                                <!--begin::Border-->
                                <div class="separator separator-dashed my-8"></div>
                                <!--end::Border-->
                                <!--begin::Input group-->
                                <div class="mb-5">
                                    <label class="fs-6 form-label fw-bolder text-dark"><%= t'student.search.title.prefecture' %></label>
                                    <!--begin::Select-->
                                    <%=  select_tag :prefecture_id,options_for_select(prefecture_options_for_vacancy_search.map { |pref| [pref.prefecture_name, pref.id] },params[:prefecture_id]),include_blank: t('student.search.search_by_prefecture'),class: 'form-select form-select-solid', :data => { :control => 'select2', 'hide-search' => true }  %>  
                                    <!--end::Select-->
                                </div>
                                <!--end::Input group-->
                                <!--begin::Border-->
                                <div class="separator separator-dashed my-8"></div>
                                <!--end::Border-->
                                <!--begin::Action-->
                                <div class="d-none d-md-none d-lg-flex d-xl-flex align-items-center justify-content-center min-w-100px p-2">
                                    <%= link_to t('search.clear'), student_student_company_matched_questionnaire_result_path, class: "btn btn-light-primary btn-color-gray-400 me-3" %>
                                    <%= form.submit t('search.apply'),class: "btn btn-primary" %>
                                </div>
                                <div class="d-flex d-md-flex d-lg-none d-xl-none border border-gray-500 border-dashed rounded align-items-center justify-content-center min-w-100px p-2">
                                    <%= link_to t('search.clear'), student_student_company_matched_questionnaire_result_path, class: "btn btn-light-primary btn-color-gray-400 me-3" %>
                                    <%= form.submit t('search.apply'),class: "btn btn-primary" %>
                                </div>
                                <!--end::Action-->                                
                            </div>
                            <!--end::Body-->
                        </div>
                        <!--end::Card-->
                    <% end %>
                </div>
                <!--end::Form-->
            </div>
            <!--end::Aside-->
            <!--begin::Layout-->
            <div class="flex-lg-row-fluid">
                <!--begin::Toolbar-->
                <div class="d-flex flex-wrap flex-stack mb-4">
                    <!--begin::Title-->
                    <div class="d-flex flex-wrap align-items-center my-1">
                        <h3 class="fw-bolder me-5 my-1">
                            <%=  t('search.company_count_title')  %> <%= @matched_result.total_count %> <%= t('search.count_unit') %>
                        </h3>
                    </div>
                    <!--end::Title-->
                    <div class="d-flex flex-wrap my-1 d-block d-lg-none">
                        <!--begin::Tab nav-->
                        <ul class="nav nav-pills mb-2 mb-sm-0">
                            <li class="nav-item m-0" id="search_form_toggle">
                                <a class="btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary active">
                                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs015.svg-->
                                    <span class="svg-icon svg-icon-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M21 7H3C2.4 7 2 6.6 2 6V4C2 3.4 2.4 3 3 3H21C21.6 3 22 3.4 22 4V6C22 6.6 21.6 7 21 7Z" fill="black"></path>
                                            <path opacity="0.3" d="M21 14H3C2.4 14 2 13.6 2 13V11C2 10.4 2.4 10 3 10H21C21.6 10 22 10.4 22 11V13C22 13.6 21.6 14 21 14ZM22 20V18C22 17.4 21.6 17 21 17H3C2.4 17 2 17.4 2 18V20C2 20.6 2.4 21 3 21H21C21.6 21 22 20.6 22 20Z" fill="black"></path>
                                        </svg>
                                    </span>
                                    <!--end::Svg Icon-->
                                </a>
                            </li>
                        </ul>
                        <!--end::Tab nav-->
                    </div>
                </div>
                <!--end::Toolbar-->
                <!--begin::Tab Content-->
                <div class="tab-content">
                    <!--begin::Tab pane-->
                    <div id="kt_project_users_card_pane" class="tab-pane fade show active">
                        <!--begin::Row-->
                        <div class="row g-6 g-xl-9 mt-1">
                            <% if @matched_result.present? %>
                                <!--begin::Col-->
                                <% @matched_result.each_with_index do |result,index| %> 
                                    <div class="col-12 col-lg-6 col-md-6 col-sm-12 mt-0" >
                                        <div class="card card-custom card-stretch gutter-b border  border-secondary border-1 border-hover-primary">
                                            <%= link_to company_page_home_path(id: result.company_id), class: "card-body p-5" do %>
                                                <!--begin::industry name-->
                                                <div class="d-flex justify-content-between mb-3">                     
                                                    <span class="badge badge-light-primary">
                                                        <%= result.industry_name %>
                                                    </span>
                                                </div>
                                                <!--end::industry name-->
                                                <!--begin::location name-->
                                                <div class="d-flex flex-grow-1 mb-5">
                                                    <i class="fas fa-map-marker-alt text-warning mt-1"></i>
                                                    <span class="label mx-3 text-muted">
                                                    <%= result.display_address %>
                                                    </span>
                                                </div>
                                                <!--end::location name-->
                                                <!--begin::logo-->
                                                <div class="d-flex mb-5">
                                                    <div class="symbol text-center border">
                                                        <% if @matched_result[index].image.present? %>
                                                        <%= image_tag @matched_result[index].image %>
                                                        <% else %>
                                                            <%= image_tag "avatar/building.jpg", class: "" %>
                                                        <% end %>
                                                    </div>
                                                    <div class="text-dark fs-3 fw-bolder ms-5 my-auto">
                                                        <%= result.company_name %>
                                                    </div>
                                                </div>
                                                <!--end::logo--> 
                                                <!--begin::industry-->
                                                <div class="d-flex align-items-center w-100 mb-5">
                                                    <div class="d-flex align-items-center me-4" style="width: 110px; height: 110px;">
                                                        <div class="single-chart">
                                                            <svg viewBox="0 0 36 36" class="circular-chart primary">
                                                            <path class="circle-bg"
                                                                d="M18 2.0845
                                                                a 15.9155 15.9155 0 0 1 0 31.831
                                                                a 15.9155 15.9155 0 0 1 0 -31.831"
                                                            />
                                                            <path class="circle"
                                                                stroke-dasharray="<%= result.overall_result.round %>, 100"
                                                                d="M18 2.0845
                                                                a 15.9155 15.9155 0 0 1 0 31.831
                                                                a 15.9155 15.9155 0 0 1 0 -31.831"
                                                            />
                                                            <text x="18" y="13" class="text">
                                                                マッチ度
                                                            </text>
                                                            <text x="18" y="25" class="percentage fw-bolder">
                                                                <%= result.overall_result.round %>%
                                                            </text>
                                                            </svg>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex flex-column w-100">
                                                        <div class="d-flex flex-row mb-5">
                                                            <div style="border-left: 1px solid rgb(41, 160, 177); border-right: 1px solid rgb(41, 160, 177); height: 40px;"></div>
                                                                <div class="d-flex flex-column " style="margin-left: 10px; min-width: 75%; max-width: 75%;">
                                                                    <span class="text-gray-800 fs-6 fw-bolder"><%= Company::Vacancy.human_attribute_name('recruit_industry_type') %></span>
                                                                    <span class="text-gray-800 fs-8 fw-bold"><%= result.industry_name %></span>
                                                                </div>
                                                                <span class="symbol symbol-40px">
                                                                    <span class="symbol-label bg-light-success">
                                                                        <span class="svg-icon svg-icon-1 svg-icon-success">
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                                <path opacity="0.3" d="M20.9 12.9C20.3 12.9 19.9 12.5 19.9 11.9C19.9 11.3 20.3 10.9 20.9 10.9H21.8C21.3 6.2 17.6 2.4 12.9 2V2.9C12.9 3.5 12.5 3.9 11.9 3.9C11.3 3.9 10.9 3.5 10.9 2.9V2C6.19999 2.5 2.4 6.2 2 10.9H2.89999C3.49999 10.9 3.89999 11.3 3.89999 11.9C3.89999 12.5 3.49999 12.9 2.89999 12.9H2C2.5 17.6 6.19999 21.4 10.9 21.8V20.9C10.9 20.3 11.3 19.9 11.9 19.9C12.5 19.9 12.9 20.3 12.9 20.9V21.8C17.6 21.3 21.4 17.6 21.8 12.9H20.9Z" fill="black"></path><path d="M16.9 10.9H13.6C13.4 10.6 13.2 10.4 12.9 10.2V5.90002C12.9 5.30002 12.5 4.90002 11.9 4.90002C11.3 4.90002 10.9 5.30002 10.9 5.90002V10.2C10.6 10.4 10.4 10.6 10.2 10.9H9.89999C9.29999 10.9 8.89999 11.3 8.89999 11.9C8.89999 12.5 9.29999 12.9 9.89999 12.9H10.2C10.4 13.2 10.6 13.4 10.9 13.6V13.9C10.9 14.5 11.3 14.9 11.9 14.9C12.5 14.9 12.9 14.5 12.9 13.9V13.6C13.2 13.4 13.4 13.2 13.6 12.9H16.9C17.5 12.9 17.9 12.5 17.9 11.9C17.9 11.3 17.5 10.9 16.9 10.9Z" fill="black">
                                                                                </path>
                                                                            </svg>
                                                                        </span>
                                                                    </span>
                                                                </span>
                                                            </div>
                                                            <div class="d-flex flex-row mb-5">
                                                                <div style="border-left: 1px solid rgb(255, 131, 0); border-right: 1px solid rgb(255, 131, 0); height: 40px;"></div><div class="d-flex flex-column " style="margin-left: 10px; min-width: 75%; max-width: 75%;">
                                                                    <span class="text-gray-800 fs-6 fw-bolder"><%= t('student.search.title.prefecture') %></span>
                                                                    <span class="text-gray-800 fs-8 fw-bold"><%= result.region_result["value"] %></span>
                                                                </div>
                                                                <span class="symbol symbol-40px">
                                                                    <span class="symbol-label bg-light-danger">
                                                                        <span class="svg-icon svg-icon-1 svg-icon-danger">
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
                                                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                            <rect x="5" y="5" width="5" height="5" rx="1" fill="#000000"></rect>
                                                                            <rect x="14" y="5" width="5" height="5" rx="1" fill="#000000" opacity="0.3"></rect>
                                                                            <rect x="5" y="14" width="5" height="5" rx="1" fill="#000000" opacity="0.3"></rect>
                                                                            <rect x="14" y="14" width="5" height="5" rx="1" fill="#000000" opacity="0.3"></rect>
                                                                            </g>
                                                                            </svg>
                                                                        </span>
                                                                    </span>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>                                                
                                                    <!--end::industry-->                                           
                                            <% end %>
                                        </div>
                                    </div> 
                                <% end %>
                            <% else %>
                                <div>
                                    <div class="card card-body bg-white d-flex flex-row justify-content-center py-10">
                                        <span className="label text-dark fs-3 fw-bolder">
                                        該当データがあリません。
                                        </span>
                                    </div>
                                </div>
                            <% end %>  
                            <!--end::Col-->
                        </div>
                        <!--end::Row-->
                        <!--start::Pagination-->
                        <% if @matched_result.present?  %>
                            <div class="d-flex flex-wrap justify-content-between align-items-center pt-2">
                                <div class="d-flex flex-wrap">
                                    <%= paginate @matched_result %>
                                </div>
                                <div class="d-flex align-items-center py-3">
                                    <span class="text-muted"><%=  t('common.display')  %> <%= @matched_result.total_count %> <%=  t('common.to')  %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <%= @matched_result.offset_value + 1 %> ~ <%= @matched_result.offset_value + @matched_result.count %><%=  t('common.search_result')  %></span>
                                </div>
                            </div> 
                        <% end %>
                        <!--end::Pagination-->
                    </div>
                    <!--end::Tab pane-->
                </div>
                <!--end::Tab Content-->
            </div>
            <!--end::Layout-->
        </div>
        <!--end::Kodawari-->
    </div>
    <!--end::Content-->
</div>
<!--end::Container-->