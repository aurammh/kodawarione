<!--begin::Toolbar-->
<div class="toolbar py-5 py-lg-5 mb-0" id="kt_toolbar">
    <!--begin::Container-->
    <div id="kt_toolbar_container" class="container-xxl d-flex flex-stack flex-wrap">
        <!--begin::Page title-->
        <% breadcrumbs_navigation_add (t ('student_commitment.title.student_commitment_title1')), '#' %>
        <%= render_student_breadcrumbs_navigation(t ('student_commitment.title.student_commitment_title1')) %>			
        <!--end::Page title-->	
    </div>
    <!--end::Container-->
</div>
<!--end::Toolbar-->
<div class="mb-9">
    <%= render partial: "student/shared/student_commitment/profile_banner" %>
</div>
<!--begin::Container-->
<div id="kt_content_container" class="d-flex flex-column-fluid align-items-start container-xxl">
    <!--begin::Content-->
    <div class="content flex-row-fluid" id="kt_content">
        <!--begin::Navbar-->
        <%= render partial: "student/shared/students/profile_navbar", :locals =>{:current_route => "commitment"} %>
		<!--end::Navbar-->
        <!--begin::Card-->
		<div class="card mb-5 mb-xl-10">
			<!--begin::Card header-->
			<div class="card-header border-0">
				<!--begin::Card title-->
				<div class="card-title m-0">
					<h3 class="fw-bolder m-0"><%=t ('student_commitment.title.student_commitment_title1')%></h3>
				</div>
				<!--end::Card title-->
			</div>
			<!--end::Card header-->
			<!--begin::Form-->
            <%= form_with(model: @user_student, url: student_student_commitment_url , method: "patch") do |form| %>
                <%= form.hidden_field :progress_profile, class: "progress-percent" %>
				<!--begin::Card body-->
		    	<div class="card-body border-top p-9">
                    <!--begin::Commitment Information-->
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"><%= form.label :cover_photo %></label>
						<!--end::Label-->
						<!--begin::Col-->
						<div class="col-lg-8">
							<!--begin::Image input-->
                            <div class="py-2 mb-0">
                                <%= form.hidden_field :coverImgFlag, :value => true , id: "coverImgFlag" %>
                                <label class="form-check form-switch form-check-custom form-check-solid">
                                    <%= form.check_box :pr_way, checked: "checked",class: "form-check-input" %>
                                    <span></span>
                                    <%= form.label "pr_way", t("student_commitment.title.image_and_color_palette_title"), id: "student_student_commitment_pr_way", class: "ms-3 mb-0" %>
                                </label>
                            </div>
						</div>
						<!--end::Col-->
					</div>
					<!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row mb-6 cover-photo">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"></label>
                        <!--begin::Col-->
						<div class="col-lg-8">
                            <div class="image-input image-input-outline w-100">
                                <label class="image-input-wrapper event w-100 h-150px upload-preview upload-kodawari-preview student-profile-upload">                
                                    <%= image_tag @user_student.cover_photo.attached? && @user_student.cover_photo.persisted? ? @user_student.cover_photo : "avatar/preview.svg", class: "w-100 h-100" %>
                                    <span class="btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow edit-pen">
                                        <i class="fa fa-pen icon-sm text-muted "></i>
                                    </span>
                                    <%= form.hidden_field :image_data, :value => false , id: "image_data" %>
                                    <%= form.hidden_field :imageFlag, :value => false , id: "imageFlag" %>
                                    <%= form.file_field :image,accept: "image/png,image/gif,image/jpeg,image/jpg", :class=> "d-none kodawari-banner-input-file", :id => "image", "data-existed": form.object.cover_photo.attached?%>
                                    <input type="hidden" name="profile_avatar_remove" />
                                </label>                                
                                <span class="btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow"
                                    data-kt-image-input-action="cancel"
                                    data-bs-toggle="tooltip"
                                    data-bs-dismiss="click"
                                    title="Cancel avatar">
                                    <i class="ki ki-bold-close icon-xs text-muted"></i>
                                </span>
                                <span type="button" id="img-remove" class="btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow"
                                    data-kt-image-input-action="remove"
                                    data-bs-toggle="tooltip"
                                    data-bs-dismiss="click"
                                    title="Remove avatar">
                                    <i class="ki ki-bold-close icon-xs text-muted"></i>
                                </span>
                            </div>
                            <!--begin::Hint-->
                            <div class="py-4 d-flex justify-content-center">
                                <% if @user_student.cover_photo.attached? && @user_student.cover_photo.persisted? %>
                                    <span class="form-text text-muted chosen-text img-name text-break"><%= @user_student.cover_photo.filename %></span>
                                <% else %>
                                    <span class="form-text text-muted chosen-text"><%=t('common.profile_upload_text')%></span>
                                <% end %>
                            </div>
                            <!--end::Hint-->
                            <%# image upload modal start%>
                            <%= render "common/banner_image_crop" %>
                            <%# image upload modal end%>
                            <!--end::Image input-->
                        </div>
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row cover-color mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"></label>
                        <!--begin::Col-->
						<div class="col-lg-8">
                            <%= form.color_field :cover_color %>
                        </div>
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label required fw-bold fs-6"><%= form.label :full_name %></label>
						<!--end::Label-->
						<!--begin::Col-->
						<div class="col-lg-8 fv-row">
                            <%= form.text_field :nick_name, id: "full_name", class: "form-control form-control-lg form-control-solid text-uppercase track",placeholder: t('student_commitment.placeholder.full_name') %>
                            <p class ="text-danger fs-6 ms-invalid-feedback mt-1"><%= @user_student.errors.full_messages_for(:nick_name)[0] %></p>
						</div>
						<!--end::Col-->
					</div>
					<!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"><%= form.label :current_address %></label>
						<!--end::Label-->
						<!--begin::Col-->
						<div class="col-lg-8 fv-row">
                            <%= form.collection_select(:current_address ,prefecture_options_for_residence , :id ,:prefecture_name, { :include_blank => ( t'select.not_select')}, selected: form.object.current_address, :class=> "form-select form-select-lg form-select-solid track",data: {:placeholder => t('student_commitment.placeholder.address')+t('common.default_placeholder'), :control => 'select2', 'hide-search' => true}) %>
                            <p class ="text-danger font-size-sm ms-invalid-feedback mt-1"><%= @user_student.errors.full_messages_for(:current_address)[0] %></p>
						</div>
						<!--end::Col-->
					</div>
					<!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"><%= form.label :preferred_working_area %></label>
						<!--end::Label-->
						<!--begin::Col-->
						<div class="col-lg-8 fv-row">
                            <%= form.collection_select(:preferred_working_area ,prefecture_options , :id ,:prefecture_name, { :include_blank => false}, selected: form.object.preferred_working_area, multiple: true, :class=> "form-select form-select-lg form-select-solid track",data: {:placeholder => t('student_commitment.placeholder.desired_location')+t('common.default_placeholder'),:control => 'select2', 'hide-search' => true, 'close-on-select' => false }) %>
                            <p class ="text-danger font-size-sm ms-invalid-feedback mt-1"><%= @user_student.errors.full_messages_for(:preferred_working_area)[0] %></p>
						</div>
						<!--end::Col-->
					</div>
					<!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"><%= form.label :birthday %></label>
						<!--end::Label-->
						<!--begin::Col-->
							<!--begin::Input group-->
							<div class="col-lg-8 fv-row position-relative d-flex align-items-center birthday_datepicker ">
								<!--begin::Icon-->
									<!--begin::Svg Icon | path: icons/duotune/general/gen014.svg-->
										<span class="svg-icon svg-icon-2 position-absolute mx-4">
											<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
												<path opacity="0.3" d="M21 22H3C2.4 22 2 21.6 2 21V5C2 4.4 2.4 4 3 4H21C21.6 4 22 4.4 22 5V21C22 21.6 21.6 22 21 22Z" fill="black"></path>
												<path d="M6 6C5.4 6 5 5.6 5 5V3C5 2.4 5.4 2 6 2C6.6 2 7 2.4 7 3V5C7 5.6 6.6 6 6 6ZM11 5V3C11 2.4 10.6 2 10 2C9.4 2 9 2.4 9 3V5C9 5.6 9.4 6 10 6C10.6 6 11 5.6 11 5ZM15 5V3C15 2.4 14.6 2 14 2C13.4 2 13 2.4 13 3V5C13 5.6 13.4 6 14 6C14.6 6 15 5.6 15 5ZM19 5V3C19 2.4 18.6 2 18 2C17.4 2 17 2.4 17 3V5C17 5.6 17.4 6 18 6C18.6 6 19 5.6 19 5Z" fill="black"></path>
												<path d="M8.8 13.1C9.2 13.1 9.5 13 9.7 12.8C9.9 12.6 10.1 12.3 10.1 11.9C10.1 11.6 10 11.3 9.8 11.1C9.6 10.9 9.3 10.8 9 10.8C8.8 10.8 8.59999 10.8 8.39999 10.9C8.19999 11 8.1 11.1 8 11.2C7.9 11.3 7.8 11.4 7.7 11.6C7.6 11.8 7.5 11.9 7.5 12.1C7.5 12.2 7.4 12.2 7.3 12.3C7.2 12.4 7.09999 12.4 6.89999 12.4C6.69999 12.4 6.6 12.3 6.5 12.2C6.4 12.1 6.3 11.9 6.3 11.7C6.3 11.5 6.4 11.3 6.5 11.1C6.6 10.9 6.8 10.7 7 10.5C7.2 10.3 7.49999 10.1 7.89999 10C8.29999 9.90003 8.60001 9.80003 9.10001 9.80003C9.50001 9.80003 9.80001 9.90003 10.1 10C10.4 10.1 10.7 10.3 10.9 10.4C11.1 10.5 11.3 10.8 11.4 11.1C11.5 11.4 11.6 11.6 11.6 11.9C11.6 12.3 11.5 12.6 11.3 12.9C11.1 13.2 10.9 13.5 10.6 13.7C10.9 13.9 11.2 14.1 11.4 14.3C11.6 14.5 11.8 14.7 11.9 15C12 15.3 12.1 15.5 12.1 15.8C12.1 16.2 12 16.5 11.9 16.8C11.8 17.1 11.5 17.4 11.3 17.7C11.1 18 10.7 18.2 10.3 18.3C9.9 18.4 9.5 18.5 9 18.5C8.5 18.5 8.1 18.4 7.7 18.2C7.3 18 7 17.8 6.8 17.6C6.6 17.4 6.4 17.1 6.3 16.8C6.2 16.5 6.10001 16.3 6.10001 16.1C6.10001 15.9 6.2 15.7 6.3 15.6C6.4 15.5 6.6 15.4 6.8 15.4C6.9 15.4 7.00001 15.4 7.10001 15.5C7.20001 15.6 7.3 15.6 7.3 15.7C7.5 16.2 7.7 16.6 8 16.9C8.3 17.2 8.6 17.3 9 17.3C9.2 17.3 9.5 17.2 9.7 17.1C9.9 17 10.1 16.8 10.3 16.6C10.5 16.4 10.5 16.1 10.5 15.8C10.5 15.3 10.4 15 10.1 14.7C9.80001 14.4 9.50001 14.3 9.10001 14.3C9.00001 14.3 8.9 14.3 8.7 14.3C8.5 14.3 8.39999 14.3 8.39999 14.3C8.19999 14.3 7.99999 14.2 7.89999 14.1C7.79999 14 7.7 13.8 7.7 13.7C7.7 13.5 7.79999 13.4 7.89999 13.2C7.99999 13 8.2 13 8.5 13H8.8V13.1ZM15.3 17.5V12.2C14.3 13 13.6 13.3 13.3 13.3C13.1 13.3 13 13.2 12.9 13.1C12.8 13 12.7 12.8 12.7 12.6C12.7 12.4 12.8 12.3 12.9 12.2C13 12.1 13.2 12 13.6 11.8C14.1 11.6 14.5 11.3 14.7 11.1C14.9 10.9 15.2 10.6 15.5 10.3C15.8 10 15.9 9.80003 15.9 9.70003C15.9 9.60003 16.1 9.60004 16.3 9.60004C16.5 9.60004 16.7 9.70003 16.8 9.80003C16.9 9.90003 17 10.2 17 10.5V17.2C17 18 16.7 18.4 16.2 18.4C16 18.4 15.8 18.3 15.6 18.2C15.4 18.1 15.3 17.8 15.3 17.5Z" fill="black"></path>
											</svg>
										</span>
									<!--end::Svg Icon-->
								<!--end::Icon-->
								<!--begin::Datepicker-->
									<%= form.text_field :birthday, class: "form-control form-control-lg form-control-solid ps-12 flatpickr-input track active", id: "birthday", "data-input": "" %>
								<!--end::Datepicker-->
							</div>
							<!--end::Input group-->
							<p class ="text-danger fs-6 ms-invalid-feedback mt-1"><%= @user_student.errors.full_messages_for(:birthday)[0] %></p>
						<!--end::Col-->
					</div>
					<!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"><%= form.label :gender %></label>
						<!--end::Label-->
						<!--begin::Col-->
						<div class="col-lg-8 fv-row">
                            <div class="form-check form-check-custom form-check-solid form-check-sm">
                                <%= form.collection_radio_buttons(:gender, gender_options, :first, :second, checked: @user_student.gender.nil? ? "male" : @user_student.gender) do |b| %>
                                    <label class="me-5">
                                        <%= b.radio_button(class: "form-check-input track") %>
                                        <span class="form-check-label"></span>
                                        <%= b.text %>
                                    </label>
                                <% end %>
                            </div>
						</div>
						<!--end::Col-->
					</div>
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"><%= form.label :qualification_string %></label>
						<!--end::Label-->
						<!--begin::Col-->
						<div class="col-lg-8 fv-row">
                            <%= form.text_area :qualification_string, id: "qualification_string", class: "form-control form-control-lg form-control-solid track",rows: 4, maxlength: 255 %>
						</div>
						<!--end::Col-->
					</div>
					<!--end::Input group-->
                    <!--begin::Input group-->
					<div class="row mb-6">
						<!--begin::Label-->
						<label class="col-lg-4 col-form-label fw-bold fs-6"><%= form.label :commitment %></label>
						<!--end::Label-->
						<!--begin::Col-->
						<div class="col-lg-8 fv-row">
                            <%= form.text_area :commitment, id: "commitment", class: "form-control form-control-lg form-control-solid track",rows: 4, maxlength: 255 %>
						</div>
						<!--end::Col-->
					</div>
					<!--end::Input group-->
                    <!--end::Commitment Information-->
				</div>
			    <!--end::Card body-->
                <!--begin::Actions-->
                <div class="card-footer d-flex justify-content-end py-6 px-9">
                    <%= link_to t('btn.cancel'), edit_student_student_commitment_path, class: "btn btn-light btn-active-light-primary me-2" %>
                    <%= form.submit t('btn.submit'), class: "btn btn-primary" %>
                </div>
                <!--end::Actions-->
                <div class="position-fixed bottom-0 right-0 p-3" style="z-index: 5; right: 0; bottom: 0;">
                    <div id="liveToast" class="toast border border-4 border-success hide" role="alert" aria-live="assertive" aria-atomic="true" data-delay="2000">
                        <div class="toast-header">
                            <%= favicon_link_tag asset_path('layout/favicon.ico') %>   
                            <strong class="mr-auto"><%= t('genuine_password.toast_title') %></strong>
                            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="toast-body">
                            <%= t('genuine_password.toast_body') %>
                        </div>
                    </div>
                </div>
                <input type= "hidden" value = <%= @genuine_password_flag %> id = 'genuine_password' >
            <% end %>
            <!--end::Form-->
        </div>
		<!--end::Card-->
    </div>
    <!--end::Content-->
</div>
<!--end::Container-->

<%# render "users/shared/toastr" %>
<%= javascript_pack_tag "common.js" %>
<%= javascript_pack_tag "student/student_commitment.js" %>
<%= javascript_pack_tag "student/students.js" %>