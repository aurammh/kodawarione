<!--begin::Toolbar-->
<div class="toolbar py-5 py-lg-5" id="kt_toolbar">
    <!--begin::Container-->
    <div id="kt_toolbar_container" class="container-xxl d-flex flex-stack flex-wrap">
        <!--begin::Page title-->
        <% breadcrumbs_navigation_add (t('dashboard.search_button.button1')), '#' %>
        <%= render_student_breadcrumbs_navigation(t('dashboard.search_button.button1')) %>		
        <!--end::Page title-->
    </div>
    <!--end::Container-->
</div>
<!--end::Toolbar-->
<!--begin::Container-->
<div id="kt_content_container" class="d-flex flex-column-fluid align-items-start container-xxl">
    <!--begin::Post-->
    <div class="content flex-row-fluid" id="kt_content">
        <!--begin::Layout-->
        <div class="d-flex flex-column flex-lg-row">
            <!--begin::Aside-->
            <div class="flex-column flex-lg-row-auto w-100 w-lg-250px w-xxl-325px me-lg-9 me-5" id="kt_search">
                <!--begin::Form-->   
                <div class="search_form" data-kt-drawer="true" data-kt-drawer-name="search_form" data-kt-drawer-activate="{default: true, lg: false}" data-kt-drawer-overlay="true" data-kt-drawer-width="{default:'200px', '300px': '100%'}" data-kt-drawer-direction="start" data-kt-drawer-toggle="#search_form_toggle" data-kt-swapper="true" data-kt-swapper-mode="prepend" data-kt-swapper-parent="{default: '#kt_body', lg: '#kt_search'}"> 
                    <%= form_for( '',url: student_companies_search_path, :method => "get") do |form| %>
                        <!--begin::Card-->
                        <div class="card border-secondary bg-body">
                            <div class="card-title d-flex d-md-flex d-lg-none d-xl-none align-item-center border justify-content-center p-5">
                                <%= link_to student_students_path(id: current_user.id) ,class: "flex-grow-1 mt-auto" do %>
                                    <%= image_tag "layout/header_logo.png", class: "h-25px h-lg-40px" %>   
                                <% end %>
                                <!--begin::Close-->
                                <div class="d-flex d-md-flex d-lg-none d-xl-none btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary active">
                                    <span class="svg-icon svg-icon-2x" data-kt-drawer-dismiss="true">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="black" />
                                        <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="black" />
                                    </svg>
                                    </span>
                                </div>
                                <!--end::Close-->
                            </div>
                            <!--begin::Body-->
                            <div class="card-body">
                                <!--begin:Search-->
                                <div class="position-relative">
                                    <!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
                                    <span class="svg-icon svg-icon-3 svg-icon-gray-500 position-absolute top-50 translate-middle ms-6">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="black"></rect>
                                            <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="black"></path>
                                        </svg>
                                    </span>
                                    <!--end::Svg Icon-->
                                    <%= form.text_field :keyword, class: "form-control form-control-solid ps-10", value: (params[:keyword]), placeholder: t('search.keyword_search') %>
                                </div>
                                <!--end:Search-->
                                <div class="separator separator-dashed my-8"></div>
                                <!--begin::Input group-->
                                <div class="mb-5">
                                    <label class="fs-6 form-label fw-bolder text-dark"><%= Company::Vacancy.human_attribute_name('recruit_industry_type') %></label>
                                    <!--begin::Select-->
                                    <%=  select_tag :industry_id,options_for_select(industry_type_options.map { |ind| [ind.industry_name, ind.id] },params[:industry_id]),include_blank: t('student.search.view_all_industry_type'),class: 'form-select form-select-solid', :data => { :control => 'select2', 'hide-search' => true } %>                                                
                                    <!--end::Select-->
                                </div>
                                <!--end::Input group-->
                                <!--begin::Border-->
                                <div class="separator separator-dashed my-8"></div>
                                <!--end::Border-->
                                <!--begin::Input group-->
                                <div class="mb-5">
                                    <label class="fs-6 form-label fw-bolder text-dark"><%= t'student.search.title.prefecture' %></label>
                                    <!--begin::Select-->
                                    <%=  select_tag :prefecture_id,options_for_select(prefecture_options_for_vacancy_search.map { |pref| [pref.prefecture_name, pref.id] },params[:prefecture_id]),include_blank: t('student.search.search_by_prefecture'),class: 'form-select form-select-solid', :data => { :control => 'select2', 'hide-search' => true }  %>  
                                    <!--end::Select-->
                                </div>
                                <!--end::Input group-->
                                <!--begin::Border-->
                                <div class="separator separator-dashed my-8"></div>
                                <!--end::Border-->
                                <!--begin::Action-->
                                <div class="d-none d-md-none d-lg-flex d-xl-flex align-items-center justify-content-center min-w-100px p-2">
                                    <%= link_to t('search.clear'), student_companies_search_path, class: "btn btn-light-primary btn-color-gray-400 me-3" %>
                                    <%= form.submit t('search.apply'),class: "btn btn-primary" %>
                                </div>
                                <div class="d-flex d-md-flex d-lg-none d-xl-none border border-gray-500 border-dashed rounded align-items-center justify-content-center min-w-100px p-2">
                                    <%= link_to t('search.clear'), student_companies_search_path, class: "btn btn-light-primary btn-color-gray-400 me-3" %>
                                    <%= form.submit t('search.apply'),class: "btn btn-primary" %>
                                </div>
                                <!--end::Action-->                                
                            </div>
                            <!--end::Body-->
                        </div>
                        <!--end::Card-->
                    <% end %>
                </div>
                <!--end::Form-->
            </div>
            <!--end::Aside-->
            <!--begin::Layout-->
            <div class="flex-lg-row-fluid">
                <!--begin::Toolbar-->
                <div class="d-flex flex-wrap flex-stack mb-4">
                    <!--begin::Title-->
                    <div class="d-flex flex-wrap align-items-center my-1">
                        <h3 class="fw-bolder me-5 my-1">
                            <%=  t('search.company_count_title')  %> <%= @companies.total_count %> <%= t('search.count_unit') %>
                        </h3>
                    </div>
                    <!--end::Title-->
                    <div class="d-flex flex-wrap my-1 d-block d-lg-none">
                        <!--begin::Tab nav-->
                        <ul class="nav nav-pills mb-2 mb-sm-0">
                            <li class="nav-item m-0" id="search_form_toggle">
                                <a class="btn btn-sm btn-icon btn-light btn-color-muted btn-active-primary active">
                                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs015.svg-->
                                    <span class="svg-icon svg-icon-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                            <path d="M21 7H3C2.4 7 2 6.6 2 6V4C2 3.4 2.4 3 3 3H21C21.6 3 22 3.4 22 4V6C22 6.6 21.6 7 21 7Z" fill="black"></path>
                                            <path opacity="0.3" d="M21 14H3C2.4 14 2 13.6 2 13V11C2 10.4 2.4 10 3 10H21C21.6 10 22 10.4 22 11V13C22 13.6 21.6 14 21 14ZM22 20V18C22 17.4 21.6 17 21 17H3C2.4 17 2 17.4 2 18V20C2 20.6 2.4 21 3 21H21C21.6 21 22 20.6 22 20Z" fill="black"></path>
                                        </svg>
                                    </span>
                                    <!--end::Svg Icon-->
                                </a>
                            </li>
                        </ul>
                        <!--end::Tab nav-->
                    </div>
                </div>
                <!--end::Toolbar-->
                <!--begin::Tab Content-->
                <div class="tab-content">
                    <!--begin::Tab pane-->
                    <div id="kt_project_users_card_pane" class="tab-pane fade show active">
                        <!--begin::Row-->
                        <div class="row g-6 g-xl-9 mt-1">
                            <!--begin::Col-->
                            <% @companies.each do |company| %> 
                                <%# link_to student_company_home_path(company), class: "col-6" do %> 
                                <div class="col-12 col-lg-6 col-md-6 col-sm-12 mt-0" >
                                    <div class="position-relative"> 
                                        <div class="favourite-company action-btn position-absolute  cursor-pointer top-0 end-0 pt-4 px-3" id="<%= company.id %>">
                                            <i class="flaticon-black fs-2  cursor-pointer <%= @student_favourite_arr.include?(company.id) ? 'text-danger' : 'text-secondary' %>"></i> 
                                        </div>
                                    </div> 
                                    <div class="card card-custom card-stretch border border-1 border-secondary border-hover-primary ">
                                        <%= link_to company_page_home_path(id: company.id), class: "" do %>
                                            <!--begin::Card Header-->
                                            <div class="card-header border-0 mt-7">
                                                <!--begin::Card Title-->
                                                <div class="card-title m-0">
                                                    <!--begin::Avatar-->
                                                    <div class="symbol symbol-75px w-75px bg-light">
                                                        <% if company.image.attached? %>
                                                            <%= image_tag (company.image), class: "" %>
                                                        <% else %>        
                                                            <%= image_tag "avatar/building.jpg", class: "" %>
                                                        <% end %>
                                                    </div>
                                                    <!--end::Avatar-->
                                                </div>
                                                <!--end::Car Title--> 
                                            </div>
                                            <!--end::Card Header-->
                                            <!--begin::Body-->
                                            <div class="card-body pt-3">
                                                <div class="d-flex flex-column h-100">
                                                    <!--begin::Heading-->
                                                    <div class="mb-3">
                                                        <span class="text-gray-800 fs-1 fw-bolder"><%= company.company_name %></span>
                                                    </div>
                                                    <!--end::Heading-->
                                                    <!--begin::Body-->
                                                    <!--begin::Items-->
                                                    <div class="d-flex align-items-center flex-wrap d-grid gap-2 mb-7">
                                                        <!--begin::Item-->
                                                        <div class="d-flex align-items-center me-5 me-xl-13">
                                                            <!--begin::Symbol-->
                                                            <div class="symbol symbol-30px symbol-circle me-3">
                                                                <span class="symbol-label bg-primary">
                                                                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs042.svg-->
                                                                    <span class="svg-icon svg-icon-5 svg-icon-white">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                            <path d="M18 21.6C16.6 20.4 9.1 20.3 6.3 21.2C5.7 21.4 5.1 21.2 4.7 20.8L2 18C4.2 15.8 10.8 15.1 15.8 15.8C16.2 18.3 17 20.5 18 21.6ZM18.8 2.8C18.4 2.4 17.8 2.20001 17.2 2.40001C14.4 3.30001 6.9 3.2 5.5 2C6.8 3.3 7.4 5.5 7.7 7.7C9 7.9 10.3 8 11.7 8C15.8 8 19.8 7.2 21.5 5.5L18.8 2.8Z" fill="currentColor"></path>
                                                                            <path opacity="0.3" d="M21.2 17.3C21.4 17.9 21.2 18.5 20.8 18.9L18 21.6C15.8 19.4 15.1 12.8 15.8 7.8C18.3 7.4 20.4 6.70001 21.5 5.60001C20.4 7.00001 20.2 14.5 21.2 17.3ZM8 11.7C8 9 7.7 4.2 5.5 2L2.8 4.8C2.4 5.2 2.2 5.80001 2.4 6.40001C2.7 7.40001 3.00001 9.2 3.10001 11.7C3.10001 15.5 2.40001 17.6 2.10001 18C3.20001 16.9 5.3 16.2 7.8 15.8C8 14.2 8 12.7 8 11.7Z" fill="currentColor"></path>
                                                                        </svg>
                                                                    </span>
                                                                    <!--end::Svg Icon-->
                                                                </span>
                                                            </div>
                                                            <!--end::Symbol-->
                                                            <!--begin::Info-->
                                                            <div class="m-0">
                                                                <span class="fw-bold text-gray-400 d-block fs-8"><%= Company::Vacancy.human_attribute_name('recruit_industry_type') %></span>
                                                                <span class="fw-bolder text-gray-800 fs-7"><%= company.industry_name %></span>
                                                            </div>
                                                            <!--end::Info-->
                                                        </div>
                                                        <!--end::Item-->
                                                        <!--begin::Item-->
                                                        <div class="d-flex align-items-center">
                                                            <!--begin::Symbol-->
                                                            <div class="symbol symbol-30px symbol-circle me-3">
                                                                <span class="symbol-label bg-primary">
                                                                    <!--begin::Svg Icon | path: icons/duotune/abstract/abs042.svg-->
                                                                    <span class="svg-icon svg-icon-5 svg-icon-white">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                                            <path d="M18 21.6C16.6 20.4 9.1 20.3 6.3 21.2C5.7 21.4 5.1 21.2 4.7 20.8L2 18C4.2 15.8 10.8 15.1 15.8 15.8C16.2 18.3 17 20.5 18 21.6ZM18.8 2.8C18.4 2.4 17.8 2.20001 17.2 2.40001C14.4 3.30001 6.9 3.2 5.5 2C6.8 3.3 7.4 5.5 7.7 7.7C9 7.9 10.3 8 11.7 8C15.8 8 19.8 7.2 21.5 5.5L18.8 2.8Z" fill="currentColor"></path>
                                                                            <path opacity="0.3" d="M21.2 17.3C21.4 17.9 21.2 18.5 20.8 18.9L18 21.6C15.8 19.4 15.1 12.8 15.8 7.8C18.3 7.4 20.4 6.70001 21.5 5.60001C20.4 7.00001 20.2 14.5 21.2 17.3ZM8 11.7C8 9 7.7 4.2 5.5 2L2.8 4.8C2.4 5.2 2.2 5.80001 2.4 6.40001C2.7 7.40001 3.00001 9.2 3.10001 11.7C3.10001 15.5 2.40001 17.6 2.10001 18C3.20001 16.9 5.3 16.2 7.8 15.8C8 14.2 8 12.7 8 11.7Z" fill="currentColor"></path>
                                                                        </svg>
                                                                    </span>
                                                                    <!--end::Svg Icon-->
                                                                </span>
                                                            </div>
                                                            <!--end::Symbol-->
                                                            <!--begin::Info-->
                                                            <div class="m-0">
                                                                <span class="fw-bold text-gray-400 d-block fs-8"><%= Company::Company.human_attribute_name('established_date') %></span>
                                                                <span class="fw-bolder text-gray-800 fs-7"><%= l company.company_established %></span>
                                                            </div>
                                                            <!--end::Info-->
                                                        </div>
                                                        <!--end::Item-->
                                                    </div>
                                                    <!--end::Items-->
                                                    <!--end::Body-->
                                                </div>
                                            </div>
                                            <!--end::Body-->
                                        <% end %>
                                    </div> 
                                </div> 
                            <% end %>
                            <% unless @companies.present?  %>
                                <div class="col-12 m-2">
                                    <h3> <%= (t "search.no_result") %></h3>
                                </div>
                            <% end %>  
                            <!--end::Col-->
                        </div>
                        <!--end::Row-->
                        <!--start::Pagination-->
                        <% if @companies.present?  %>
                            <div class="d-flex flex-wrap justify-content-between align-items-center pt-2">
                                <div class="d-flex flex-wrap">
                                    <%= paginate @companies %>
                                </div>
                                <div class="d-flex align-items-center py-3">
                                    <span class="text-muted"><%=  t('common.display')  %> <%= @companies.total_count %> <%=  t('common.to')  %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <%= @companies.offset_value + 1 %> ~ <%=  @companies.offset_value + @companies.count %><%=  t('common.search_result')  %></span>
                                </div>
                            </div> 
                        <% end %>
                        <!--end::Pagination-->
                    </div>
                    <!--end::Tab pane-->
                </div>
                <!--end::Tab Content-->
            </div>
            <!--end::Layout-->
        </div>
    </div>
    <!--end::Post-->
</div>
<!--end::Container-->
<%= javascript_pack_tag "student/students.js" %>